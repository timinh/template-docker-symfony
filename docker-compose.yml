version: '3.7'
services: 
  app:
    build: 
      context: ./.docker/php
      dockerfile: Dockerfile
    container_name: app
    volumes: 
      - ./.docker/conf/app.conf:/etc/apache2/sites-available/000-default.conf
      - ./app:/var/www/html:rw
    ports: 
      - "80:80"
  front:
    image: 'node:alpine'
    working_dir: /home/node/app
    command:
      - /bin/sh
      - '-c'
      - 'npm install && npm run watch'
    volumes:
      - ./app:/home/node/app:rw
    ports:
        - '3000:3000'